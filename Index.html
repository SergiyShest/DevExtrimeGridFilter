<!DOCTYPE html>

<html>

<head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.css">
        <!-- подключаем библиотеку Mocha -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.js"></script>
        <!-- настраиваем Mocha: предстоит BDD-тестирование -->
        <script>
          mocha.setup('bdd');
        </script>
      
        <!-- подключаем chai -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/2.0.0/chai.js"></script>
        <!-- в chai есть много всего, выносим assert в глобальную область -->
        <script>
          var assert = chai.assert;
        </script>
    <title>eeee</title>
    <script src="Scripts/iqery.min.js"></script>
    <script src="Scripts/dx.all.js"></script>
    <script src="Scripts/dx.aspnet.data.js"></script>
    <script src="js/code2.js"></script>
    <script src="js/filter.js"></script>
    <script src="js/data.js"></script>
    <link rel="stylesheet" type="text/css" href="Content/dx.common.css" />
    <link rel="stylesheet" type="text/css" href="Content/grey.css" />
</head>
<script>
    //var dataGrid;

    
    function init() {
        // dataGrid = $('#grid').dxDataGrid('instance');
        //  dataGrid.dataSource=data;
        //setDataSource();
        // console.time("x");

    }

    
    function FilterStatus(status) {
        var filter = ["ShipCountry", "=", status];
        dataGrid.filter(filter);
        dataGrid.refresh();
        console.time("x");
    }




    //соединение массивов фильтров
    function ApplayFilterChanges() {
        var filter = ConcatFilterArr(filterA, filterB);
        filter = ConcatFilterArr(filter, filterC);
        dataGrid.filter(filter);
        dataGrid.refresh();
        console.time("x");
    }
    function ConcatFilterArr(filterArr1, filterArr2) {
        if (filterArr1.length > 0 && filterArr2.length > 0) {
            var res = new Array();
            res[0] = filterArr1;
            res[1] = "and";
            res[2] = filterArr2;
            return res;
        }
        else {
            if (filterArr1.length > 0) {
                return filterArr1
            }
            else {
                return filterArr2
            }
        }
    }


    function FilterClear() {
        filterA.length = 0;
        filterB.length = 0;
        filterC.length = 0;
        dataGrid.clearFilterStatus();

    }
    function find() {
        filterC.length = 0;
        var check = document.getElementById("IdFilterCheck").checked;
        if (!check) return;

        var inpVal = document.getElementById("inpIdFilter").value;
        filterCommaSplittedCodition('OrderID', inpVal);
        ApplayFilterChanges();
    }


</script>

<body onload="init()">
    <span>Header</span>
    <div id="filter" style="background-color:lightblue">dsds</div>>
    <br />
    <button onclick="CreateFilter()">CreateFilter</button>
    <button onclick='FilterStatus("All")'>All</button>
    <button onclick='FilterStatus("Switzerland")'>Switzerland</button>
    <button onclick='FilterStatus("Belgium")'>Belgium</button>
    <button onclick='FilterStatus("Brazil")'>Brazil</button>
    <button onclick='FilterStatus("Germany")'>Germany</button>

    <button onclick="FilterClear()">FilterClear</button>

    <br />
    <div id="grid"></div>


    <div id="mocha"></div>
    <script src="tests/test.js"></script>
    <!-- запустить тесты! -->
    <script>
        function pow() {
  return 8; // :) мы - мошенники!
}
      mocha.run();
    </script>

</body>

</html>